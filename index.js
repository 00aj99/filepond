/*
 * FilePond 0.9.0
 * Licensed under GPL, https://opensource.org/licenses/GPL-3.0
 * You need to obtain a Commercial License to use it in a non-GPL project.
 * Please visit https://pqina.nl/filepond for details.
 */
const isNode=e=>e instanceof HTMLElement,createStore=(e,t=[],r=[])=>{const o=babelHelpers.extends({},e),a=[],i=(e,t)=>{c[e]&&c[e](t),a.push({type:e,data:t})},n=(e,...t)=>l[e]?l[e](...t):null,s={getState:()=>babelHelpers.extends({},o),processActionQueue:()=>{const e=[...a];return a.length=0,e},dispatch:i,query:n};let l={};t.forEach(e=>{l=babelHelpers.extends({},e(o),l)});let c={};return r.forEach(e=>{c=babelHelpers.extends({},e(i,n,o),c)}),s},defineProperty=(e,t,r)=>{"function"!=typeof r?Object.defineProperty(e,t,babelHelpers.extends({},r)):e[t]=r},createObject=e=>{const t={};for(const r in e)e.hasOwnProperty(r)&&defineProperty(t,r,e[r]);return t},forin=(e,t)=>{for(const r in e)e.hasOwnProperty(r)&&t(r,e[r])},attr=(e,t,r=null)=>{if(null===r)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,r)},ns="http://www.w3.org/2000/svg",svgElements=["svg","path"],isSVGElement=e=>svgElements.includes(e),createElement=(e,t,r={})=>{"object"==typeof t&&(r=t,t=null);const o=isSVGElement(e)?document.createElementNS(ns,e):document.createElement(e);return t&&(isSVGElement(e)?attr(o,"class",t):o.className=t),forin(r,(e,t)=>{attr(o,e,t)}),o},appendChild=e=>(t,r)=>{void 0!==r&&e.children[r]?e.insertBefore(t,e.children[r]):e.appendChild(t)},appendChildView=(e,t)=>(e,r)=>(void 0!==r?t.splice(r,0,e):t.push(e),e),removeChildView=(e,t)=>r=>(t.splice(t.indexOf(r),1),r.element.parentNode&&e.removeChild(r.element),r),getViewRect=(e,t,r)=>{const o=r[0]||e.left,a=r[1]||e.top,i=o+e.width,n=a+e.height,s={element:babelHelpers.extends({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:o,top:a,right:i,bottom:n}};return t.map(e=>e.rect).forEach(e=>{expandRect(s.inner,babelHelpers.extends({},e.inner)),expandRect(s.outer,babelHelpers.extends({},e.outer))}),calculateRectSize(s.inner),s.outer.bottom+=s.element.marginBottom,s.outer.right+=s.element.marginRight,calculateRectSize(s.outer),s},expandRect=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},calculateRectSize=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},isNumber=e=>"number"==typeof e,thereYet=(e,t,r,o=.001)=>Math.abs(e-t)<o&&Math.abs(r)<o,spring=({stiffness:e=.5,damping:t=.75,mass:r=10}={})=>{let o=null,a=null,i=0,n=!1;const s=createObject({interpolate:()=>{if(n)return;if(!isNumber(o)||!isNumber(a))return n=!0,void(i=0);thereYet(a+=i+=-(a-o)*e/r,o,i*=t)?(a=o,i=0,n=!0,s.onupdate(a),s.oncomplete(a)):s.onupdate(a)},target:{set:e=>{if(isNumber(e)&&!isNumber(a)&&(a=e),o=e,a===o)return n=!0,i=0,s.onupdate(a),void s.oncomplete(a);n=!1},get:()=>o},resting:{get:()=>n},onupdate:e=>{},oncomplete:e=>{}});return s},easeInOutQuad=e=>e<.5?2*e*e:(4-2*e)*e-1,tween=({duration:e=500,easing:t=easeInOutQuad,delay:r=0}={})=>{let o,a,i=null,n=!0,s=!1,l=null;const c=createObject({interpolate:p=>{n||null===l||(null===i&&(i=p),p-i<r||((o=p-i-r)<e?(a=o/e,c.onupdate((o>=0?t(s?1-a:a):0)*l)):(o=1,n=!0,a=s?0:1,c.onupdate(a*l),c.oncomplete(a*l))))},target:{get:()=>s?0:l,set:e=>{if(null===l)return l=e,c.onupdate(e),void c.oncomplete(e);0===e?(l=1,s=!0):(s=!1,l=e),n=!1,i=null}},resting:{get:()=>n},onupdate:e=>{},oncomplete:e=>{}});return c},animator={spring:spring,tween:tween},createAnimator=(e,t,r)=>{const o=e[t]&&"object"==typeof e[t][r]?e[t][r]:e[t]||e,a="string"==typeof o?o:o.type,i="object"==typeof o?babelHelpers.extends({},o):{};return animator[a]?animator[a](i):null},addGetSet=(e,t,r,o=!1)=>{(t=Array.isArray(t)?t:[t]).forEach(t=>{e.forEach(e=>{let a=e,i=()=>r[e],n=t=>r[e]=t;"object"==typeof e&&(a=e.key,i=e.getter||i,n=e.setter||n),t[a]&&!o||(t[a]={get:i,set:n})})})},isEmpty=e=>null==e,isDefined=e=>!isEmpty(e),animations=({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:o,viewState:a})=>{const i=babelHelpers.extends({},t),n=[];let s=0;return forin(e,(e,a)=>{const l=createAnimator(a);if(!l)return;l.onupdate=(r=>{t[e]=r}),l.oncomplete=(()=>{s--}),s++,l.target=i[e];addGetSet([{key:e,setter:e=>{l.target!==e&&(l.resting&&s++,l.target=e)},getter:()=>t[e]}],[r,o],t,!0),n.push(l)}),{isIdle:()=>0===s,write:e=>{n.forEach(t=>{t.interpolate(e)})},destroy:()=>{}}},addEvent=e=>(t,r)=>{e.addEventListener(t,r)},removeEvent=e=>(t,r)=>{e.removeEventListener(t,r)},listeners=({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:o,viewState:a,view:i})=>{const n=[],s=addEvent(i.element),l=removeEvent(i.element);return o.on=((e,t)=>{n.push({type:e,fn:t}),s(e,t)}),o.off=((e,t)=>{n.splice(n.findIndex(r=>r.type===e&&r.fn===t),1),l(e,t)}),{write:()=>{},destroy:()=>{n.forEach(e=>{l(e.type,e.fn)})}}},apis=({mixinConfig:e,viewProps:t,viewExternalAPI:r})=>{addGetSet(e,r,t)},defaults={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0},styles=({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:o,view:a})=>{const i=babelHelpers.extends({},t),n={};addGetSet(e,[r,o],t);const s=()=>a.rect?getViewRect(a.rect,a.childViews,[t.translateX||0,t.translateY||0]):null;return r.rect={get:s},o.rect={get:s},e.forEach(e=>{t[e]=void 0===i[e]?defaults[e]:i[e]}),{write:()=>{propsHaveChanged(n,t)&&(applyStyles(a.element,t),Object.assign(n,...t))},destroy:()=>{}}},propsHaveChanged=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in t)if(t[r]!==e[r])return!0;return!1},applyStyles=(e,{opacity:t,translateX:r,translateY:o,scaleX:a,scaleY:i,rotateX:n,rotateY:s,rotateZ:l,height:c})=>{const p=[],d=[];(isDefined(r)||isDefined(o))&&p.push(`translate3d(${r||0}px, ${o||0}px, 0)`),(isDefined(a)||isDefined(i))&&p.push(`scale3d(${isDefined(a)?a:1}, ${isDefined(i)?i:1}, 1)`),(isDefined(l)||isDefined(s)||isDefined(n))&&p.push(`rotate3d(${n||0}, ${s||0}, ${l||0}, 360deg)`),p.length&&d.push(`transform:${p.join(" ")}`),isDefined(t)&&(d.push(`opacity:${t}`),0===t&&d.push("visibility:hidden"),t<1&&d.push("pointer-events:none;")),isDefined(c)&&d.push(`height:${c}px`);const u=e.getAttribute("style")||"",m=d.join(";");m.length===u.length&&m===u||e.setAttribute("style",m)},Mixins={styles:styles,listeners:listeners,animations:animations,apis:apis},updateRect=(e={},t={},r={})=>(e.paddingTop=parseInt(r.paddingTop,10)||0,e.marginTop=parseInt(r.marginTop,10)||0,e.marginRight=parseInt(r.marginRight,10)||0,e.marginBottom=parseInt(r.marginBottom,10)||0,e.marginLeft=parseInt(r.marginLeft,10)||0,e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e),createView=({tag:e="div",name:t=null,attributes:r={},read:o=(()=>{}),write:a=(()=>{}),create:i=(()=>{}),destroy:n=(()=>{}),filterFrameActionsForChild:s=((e,t)=>t),didCreateView:l=(()=>{}),mixins:c=[]}={})=>(p,d={})=>{const u=createElement(e,`filepond--${t}`,r),m=window.getComputedStyle(u,null),f=updateRect(),g=[],E=[],I={},T={},y=[a],_=[o],h=[n],R=()=>u,b=()=>[...g],D=()=>getViewRect(f,g,[0,0]),O={element:{get:R},style:{get:()=>m},childViews:{get:b}},S=babelHelpers.extends({},O,{rect:{get:D},ref:{get:()=>I},is:e=>t===e,appendChild:appendChild(u),createChildView:(e=>(t,r)=>t(e,r))(p),appendChildView:appendChildView(0,g),removeChildView:removeChildView(u,g),registerWriter:e=>y.push(e),registerReader:e=>_.push(e),dispatch:p.dispatch,query:p.query}),A={element:{get:R},childViews:{get:b},rect:{get:D},_read:()=>{g.forEach(e=>e._read()),updateRect(f,u,m),_.forEach(e=>e({root:P,rect:f}))},_write:(e,t=[])=>{E.forEach(t=>{t.write(e)}),y.forEach(r=>r({props:d,root:P,actions:t,timestamp:e})),g.forEach(r=>r._write(e,s(r,t))),g.filter(e=>!e.element.parentNode).forEach((e,t)=>{P.appendChild(e.element,t)})},_destroy:()=>{E.forEach(e=>e.destroy()),h.forEach(e=>e({root:P})),g.forEach(e=>e._destroy())}},w=babelHelpers.extends({},O,{rect:{get:()=>f}});forin(c,(e,t)=>{const r=Mixins[e]({mixinConfig:t,viewProps:d,viewState:T,viewInternalAPI:S,viewExternalAPI:A,view:createObject(w)});r&&E.push(r)});const P=createObject(S);i({root:P,props:d});const L=u.children.length;return g.forEach((e,t)=>{P.appendChild(e.element,L+t)}),l(P),createObject(A)},createPainter=(e,t=60)=>{const r=1e3/t;let o=null,a=null;const i=t=>{a=window.requestAnimationFrame(i),o||(o=t);const n=t-o;n<=r||(o=t-n%r,e(t))};return i(performance.now()),{pause:()=>{window.cancelAnimationFrame(a)}}},createUpdater=(e,t,r)=>o=>{e.forEach(e=>e[t]()),e.forEach(e=>e[r](o))},createRoute=e=>({root:t,props:r,actions:o=[]})=>{o.filter(t=>e[t.type]).forEach(o=>e[o.type]({root:t,props:r,action:o.data}))},insertBefore=(e,t)=>t.parentNode.insertBefore(e,t),insertAfter=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),isArray=e=>Array.isArray(e),isInt=e=>isNumber(e)&&isFinite(e)&&Math.floor(e)===e,isNull=e=>null===e,isObject=e=>"object"==typeof e&&null!==e,isString=e=>"string"==typeof e,isAPI=e=>isObject(e)&&isString(e.url)&&isObject(e.process)&&isObject(e.revert)&&isObject(e.restore)&&isObject(e.fetch),getType=e=>isArray(e)?"array":isNull(e)?"null":isInt(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":isAPI(e)?"api":typeof e,trim=e=>e.trim(),toString=e=>""+e,toArray=(e,t=",")=>isEmpty(e)?[]:isArray(e)?e:toString(e).split(t).map(trim).filter(e=>e.length),isBoolean=e=>"boolean"==typeof e,toBoolean=e=>isBoolean(e)?e:"true"===e,toNumber=e=>isNumber(e)?e:isString(e)?toString(e).replace(/[a-z]+/gi,""):0,toInt=e=>parseInt(toNumber(e),10),toFloat=e=>parseFloat(toNumber(e)),toBytes=e=>{if(isInt(e))return e;let t=toString(e).trim();return/MB$/i.test(t)?(t=t.replace(/MB$i/,"").trim(),1e3*toInt(t)*1e3):/KB/i.test(t)?(t=t.replace(/KB$i/,"").trim(),1e3*toInt(t)):toInt(t)},toFunctionReference=e=>{let t=self,r=e.split("."),o=null;for(;o=r.shift();)if(!(t=t[o]))return null;return t},createAction=(e,t,r,o)=>{if("function"==typeof t[e])return t[e];const a={url:null,method:r,headers:{},withCredentials:!1,timeout:o};if(isString(t[e]))return a.url=t[e],a;if(Object.assign(a,t[e]),isString(a.headers)){const e=a.headers.split(/:(.+)/);a.headers={header:e[0],value:e[1]}}return a.withCredentials=toBoolean(a.withCredentials),a},createAPI=e=>{const t={};return t.url=e.url||"",t.timeout=e.timeout||7e3,t.process=createAction("process",e,"POST",t.timeout),t.revert=createAction("revert",e,"DELETE",t.timeout),t.fetch=createAction("fetch",e,"GET",t.timeout),t.restore=createAction("restore",e,"GET",t.timeout),t},toAPI=e=>createAPI(e),conversionTable={array:toArray,boolean:toBoolean,int:e=>"bytes"===getType(e)?toBytes(e):toInt(e),float:toFloat,bytes:toBytes,string:toString,api:toAPI,function:e=>toFunctionReference(e)},convertTo=(e,t)=>conversionTable[t](e),createOption=(e,t,r)=>{let o=t;return{get:()=>o,set:a=>{if(a===t)return void(o=a);let i=getType(a);if(i!==r){const t=convertTo(a,r);if(i=getType(t),null===t)throw`Trying to assign value with incorrect type to "${e}", allowed type: "${r}"`;a=t}o=a}}},createOptions=e=>{const t={};return forin(e,r=>{const o=e[r];t[r]=createOption(r,o[0],o[1])}),createObject(t)},createInitialState=e=>({items:[],options:createOptions(e)}),fromCamels=(e,t="-")=>e.split(/(?=[A-Z])/).map(e=>e.toLowerCase()).join(t),createOptionAPI=(e,t)=>{const r={};return forin(t,t=>{r[t]={get:()=>e.getState().options[t],set:r=>{e.dispatch(`SET_${fromCamels(t,"_").toUpperCase()}`,{value:r})}}}),r},createOptionActions=e=>(t,r,o)=>{const a={};return forin(e,e=>{const r=fromCamels(e,"_").toUpperCase();a[`SET_${r}`]=(a=>{try{o.options[e]=a.value}catch(e){}t(`DID_SET_${r}`,{value:o.options[e]})})}),a},createOptionQueries=e=>t=>{const r={};return forin(e,e=>{r[`GET_${fromCamels(e,"_").toUpperCase()}`]=(r=>t.options[e])}),r},InteractionMethod={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},getUniqueId=()=>Math.random().toString(36).substr(2,9),forEachDelayed=(e,t,r=75)=>e.map((e,o)=>new Promise((a,i)=>{setTimeout(()=>{t(e),a()},r*o)})),arrayRemove=(e,t)=>e.splice(t,1),on=()=>{const e=[],t=(t,r)=>{arrayRemove(e,e.findIndex(e=>e.event===t&&(e.cb===r||!r)))};return{fire:(t,...r)=>{setTimeout(()=>{e.filter(e=>e.event===t).map(e=>e.cb).forEach(e=>{e(...r)})},0)},on:(t,r)=>{e.push({event:t,cb:r})},onOnce:(r,o)=>{e.push({event:r,cb:(...e)=>{t(r,o),o(...e)}})},off:t}},copyObjectPropertiesToObject=(e,t,r)=>{Object.getOwnPropertyNames(e).filter(e=>!r.includes(e)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},PRIVATE_METHODS=["fire","process","revert","load","on","off","onOnce","retryLoad"],createItemAPI=e=>{const t={};return copyObjectPropertiesToObject(e,t,PRIVATE_METHODS),t},getNonNumeric=e=>/[^0-9]+/.exec(e),getDecimalSeparator=()=>getNonNumeric(1.1.toLocaleString())[0],getThousandsSeparator=()=>{const e=getDecimalSeparator(),t=1e3.toLocaleString();return t!==1e3.toString()?getNonNumeric(t)[0]:"."===e?",":"."},Type={BOOLEAN:"boolean",INT:"int",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",API:"api",REGEX:"regex"},filters=[],applyFilterChain=(e,t,r)=>new Promise((o,a)=>{const i=filters.filter(t=>t.key===e).map(e=>e.cb);if(0===i.length)return void o(t);const n=i.shift();i.reduce((e,t)=>e.then(e=>t(e,r)),n(t,r)).then(e=>o(e)).catch(e=>a(e))}),applyFilters=(e,t,r)=>filters.filter(t=>t.key===e).map(e=>e.cb(t,r)),addFilter=(e,t)=>filters.push({key:e,cb:t}),getOptions=()=>{const e=babelHelpers.extends({},options);return applyFilters("SET_DEFAULT_OPTIONS",e),e},formatType=(e,t,r)=>r===Type.API&&e?createAPI(e):e,setOptions$1=e=>{forin(e,(e,t)=>{options[e]&&(options[e][0]=formatType(t,options[e][0],options[e][1]))})},options={name:["filepond",Type.STRING],required:[!1,Type.BOOLEAN],captureMethod:[null,Type.STRING],allowDrop:[!0,Type.BOOLEAN],allowBrowse:[!0,Type.BOOLEAN],allowPaste:[!0,Type.BOOLEAN],allowMultiple:[!1,Type.BOOLEAN],allowReplace:[!0,Type.BOOLEAN],maxFiles:[null,Type.INT],dropOnPage:[!1,Type.BOOLEAN],dropOnElement:[!0,Type.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],Type.ARRAY],instantUpload:[!0,Type.BOOLEAN],server:[null,Type.API],serverFileReferenceFormat:[/^[0-9a-fA-F]{32}$/,Type.REGEX],labelDecimalSeparator:[getDecimalSeparator(),Type.STRING],labelThousandsSeparator:[getThousandsSeparator(),Type.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',Type.STRING],labelFileWaitingForSize:["Waiting for size",Type.STRING],labelFileSizeNotAvailable:["Size not available",Type.STRING],labelFileCountSingular:["file in list",Type.STRING],labelFileCountPlural:["files in list",Type.STRING],labelFileLoading:["Loading",Type.STRING],labelFileAdded:["Added",Type.STRING],labelFileRemoved:["Removed",Type.STRING],labelFileLoadError:["Error during load",Type.STRING],labelFileProcessing:["Uploading",Type.STRING],labelFileProcessingComplete:["Upload complete",Type.STRING],labelFileProcessingAborted:["Upload cancelled",Type.STRING],labelFileProcessingError:["Error during upload",Type.STRING],labelTapToCancel:["tap to cancel",Type.STRING],labelTapToRetry:["tap to retry",Type.STRING],labelTapToUndo:["tap to undo",Type.STRING],labelButtonRemoveItem:["Remove",Type.STRING],labelButtonAbortItemLoad:["Abort",Type.STRING],labelButtonRetryItemLoad:["Retry",Type.STRING],labelButtonAbortItemProcessing:["Cancel",Type.STRING],labelButtonUndoItemProcessing:["Undo",Type.STRING],labelButtonRetryItemProcessing:["Retry",Type.STRING],labelButtonProcessItem:["Upload",Type.STRING],iconRemove:['<svg aria-hidden="true" width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M2.586 4L.293 6.293c-.39.39-.39 1.024 0 1.414.39.39 1.024.39 1.414 0L4 5.414l2.293 2.293c.39.39 1.024.39 1.414 0 .39-.39.39-1.024 0-1.414L5.414 4l2.293-2.293c.39-.39.39-1.024 0-1.414-.39-.39-1.024-.39-1.414 0L4 2.586 1.707.293c-.39-.39-1.024-.39-1.414 0-.39.39-.39 1.024 0 1.414L2.586 4z" fill-rule="nonzero" fill="#FFF"/></svg>',Type.STRING],iconProcess:['<svg aria-hidden="true" width="10" height="12" viewBox="0 0 10 12" xmlns="http://www.w3.org/2000/svg"><path d="M6 3.414V7c0 .552-.448 1-1 1s-1-.448-1-1V3.414L2.707 4.707c-.39.39-1.024.39-1.414 0-.39-.39-.39-1.024 0-1.414l3-3c.39-.39 1.024-.39 1.414 0l3 3c.39.39.39 1.024 0 1.414-.39.39-1.024.39-1.414 0L6 3.414zM1 11c-.552 0-1-.448-1-1s.448-1 1-1h8c.552 0 1 .448 1 1s-.448 1-1 1H1z" fill="#FFF" fill-rule="evenodd"/></svg>',Type.STRING],iconRetry:['<svg aria-hidden="true" width="14" height="18" viewBox="0 0 14 18" xmlns="http://www.w3.org/2000/svg"><path d="M4.81 4.752l-.038.02C3.087 5.612 2 7.332 2 9.25c0 2.762 2.238 5 5 5s5-2.238 5-5c0-.552.448-1 1-1s1 .448 1 1c0 3.866-3.134 7-7 7s-7-3.134-7-7c0-2.622 1.455-4.984 3.722-6.187l-.842-.21c-.536-.133-.862-.676-.728-1.212.133-.535.676-.86 1.212-.727l3.23.805c.535.133.86.675.73 1.21L6.52 6.162c-.132.537-.675.864-1.21.73-.537-.132-.864-.675-.73-1.21l.23-.928z" fill-rule="nonzero" fill="#FFF"/></svg>',Type.STRING],iconUndo:['<svg aria-hidden="true" width="11" height="8" viewBox="0 0 11 8" xmlns="http://www.w3.org/2000/svg"><path d="M1.78 3.59c-.383-.4-1.016-.414-1.415-.032-.4.382-.413 1.015-.03 1.414L2.808 7.56c.372.39.987.414 1.39.054l5.98-5.357c.41-.37.445-1 .077-1.412-.37-.412-1-.446-1.412-.078l-5.26 4.71L1.78 3.59z" fill-rule="nonzero" fill="#FFF"/></svg>',Type.STRING],oninit:[null,Type.FUNCTION],onwarning:[null,Type.FUNCTION],onerror:[null,Type.FUNCTION],onaddfilestart:[null,Type.FUNCTION],onaddfileprogress:[null,Type.FUNCTION],onaddfile:[null,Type.FUNCTION],onprocessfilestart:[null,Type.FUNCTION],onprocessfileprogress:[null,Type.FUNCTION],onprocessfileabort:[null,Type.FUNCTION],onprocessfilerevert:[null,Type.FUNCTION],onremovefile:[null,Type.FUNCTION],files:[[],Type.ARRAY]},isFunction=e=>"function"==typeof e,getItemByQuery=(e,t)=>isEmpty(t)?e[0]||null:isInt(t)?e[t]||null:("object"==typeof t&&(t=t.id),e.find(e=>e.id===t)||null),queries=e=>({GET_ITEM:t=>getItemByQuery(e.items,t),GET_ITEMS:t=>[...e.items],GET_ITEM_NAME:t=>{const r=getItemByQuery(e.items,t);return r?r.filename:null},GET_ITEM_SIZE:t=>{const r=getItemByQuery(e.items,t);return r?r.fileSize:null},GET_TOTAL_ITEMS:()=>e.items.length,IS_ASYNC:()=>isObject(e.options.server)&&(isObject(e.options.server.process)&&e.options.server.process.url||isFunction(e.options.server.process))}),getItemIndexByQuery=(e,t)=>isEmpty(t)?0:isString(t)?e.findIndex(e=>e.id===t):-1,removeIndex=(e,t)=>e.splice(t,1),hasRoomForItem=e=>{const t=e.items.length;if(!e.options.allowMultiple)return 0===t;const r=e.options.maxFiles;return null===r||t<r},limit=(e,t,r)=>Math.max(Math.min(r,e),t),arrayInsert=(e,t,r)=>e.splice(t,0,r),insertItem=(e,t,r)=>isEmpty(t)?null:void 0===r?(e.push(t),t):(r=limit(r,0,e.length),arrayInsert(e,r,t),t),leftPad=(e,t="")=>(t+e).slice(-t.length),getDateString=(e=new Date)=>`${e.getFullYear()}-${leftPad(e.getMonth()+1,"00")}-${leftPad(e.getDate(),"00")}_${leftPad(e.getHours(),"00")}-${leftPad(e.getMinutes(),"00")}-${leftPad(e.getSeconds(),"00")}`,isBase64DataURI=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),getFilenameFromURL=e=>e.split("/").pop().split("?").shift(),getExtensionFromFilename=e=>e.split(".").pop(),guesstimateExtension=e=>{if("string"!=typeof e)return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?"jpeg"===t?"jpg":t:""},getFileFromBlob=(e,t,r=null,o=null)=>{const a="string"==typeof r?e.slice(0,e.size,r):e.slice(0,e.size,e.type);return a.lastModifiedDate=new Date,t&&null===o&&getExtensionFromFilename(t)?a.name=t:(o=o||guesstimateExtension(a.type),a.name=t+(o?"."+o:"")),a},getBlobBuilder=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,createBlob=(e,t)=>{const r=getBlobBuilder();if(r){const o=new r;return o.append(e),o.getBlob(t)}return new Blob([e],{type:t})},getBlobFromByteStringWithMimeType=(e,t)=>{const r=new ArrayBuffer(e.length),o=new Uint8Array(r);for(let t=0;t<e.length;t++)o[t]=e.charCodeAt(t);return createBlob(r,t)},getMimeTypeFromBase64DataURI=e=>(/^data:(.+);/.exec(e)||[])[1]||null,getBase64DataFromBase64DataURI=e=>{return e.split(",")[1].replace(/\s/g,"")},getByteStringFromBase64DataURI=e=>atob(getBase64DataFromBase64DataURI(e)),getBlobFromBase64DataURI=e=>{const t=getMimeTypeFromBase64DataURI(e),r=getByteStringFromBase64DataURI(e);return getBlobFromByteStringWithMimeType(r,t)},getFileFromBase64DataURI=(e,t,r)=>getFileFromBlob(getBlobFromBase64DataURI(e),t,null,r),getFilenameFromHeaders=e=>{const t=e.split("\n");for(const e of t){const t=e.split("filename=")[1];if(t)return t.replace(/["']+/g,"")}return null},renameFile=(e,t)=>{const r=e.slice(0,e.size,e.type);return r.lastModifiedDate=e.lastModifiedDate,r.name=t,r},getDomainFromURL=e=>(0===e.indexOf("//")&&(e=location.protocol+e),e.toLowerCase().replace(/([a-z])?:\/\//,"$1").split("/")[0]),isExternalURL=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&getDomainFromURL(location.href)!==getDomainFromURL(e),createResponse=(e,t,r,o)=>({type:e,code:t,body:r,headers:o}),sendRequest=(e,t,r)=>{const o={onheaders:()=>{},onprogress:()=>{},onload:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{n=!0,s.abort()}};let a=null,i=!1,n=!1;r=babelHelpers.extends({method:"POST",headers:{},withCredentials:!1},r),/GET/i.test(r.method)&&e&&(t=`${t}${encodeURIComponent("string"==typeof e?e:JSON.stringify(e))}`);const s=new XMLHttpRequest;return(/GET/i.test(r.method)?s:s.upload).onprogress=(e=>{clearTimeout(a),n||i||o.onprogress(e.lengthComputable,e.loaded,e.total)}),s.onreadystatechange=(()=>{s.readyState<2||4===s.readyState&&0===s.status||(clearTimeout(a),o.onheaders(createResponse("headers",s.status,null,s.getAllResponseHeaders())))}),s.onload=(()=>{s.status>=200&&s.status<300?o.onload(createResponse("load",s.status,s.response,s.getAllResponseHeaders())):o.onerror(createResponse("error",s.status,s.statusText))}),s.onerror=(()=>{o.onerror(createResponse("error",s.status,s.statusText))}),s.onabort=(()=>{i||(n=!0,o.onabort())}),isInt(r.timeout)&&(a=setTimeout(()=>{i=!0,o.onerror(createResponse("error",0,"timeout")),o.abort()},r.timeout)),s.open(r.method,t,!0),Object.keys(r.headers).forEach(e=>{s.setRequestHeader(e,r.headers[e])}),r.responseType&&(s.responseType=r.responseType),r.withCredentials&&(s.withCredentials=!0),s.send(e),o},fetchLocal=(e,t,r,o,a,i)=>{const n=sendRequest(null,e,{method:"GET",responseType:"blob"});return n.onload=(r=>{r.body=getFileFromBlob(r.body,getFilenameFromHeaders(r.headers)||getFilenameFromURL(e)||getDateString()),t(r)}),n.onerror=r,n.onprogress=o,n.onabort=a,n.onheaders=i,n},createFileLoader=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},r=r=>{const a=isExternalURL(r)?e:fetchLocal;a?(t.timestamp=Date.now(),t.request=a(r,e=>{t.duration=Date.now()-t.timestamp,t.complete=!0,o.fire("load",e instanceof File?e:e.body)},e=>{o.fire("error","string"==typeof e?{type:"error",code:0,body:e}:e)},(e,r,a)=>{a&&(t.size=a),t.duration=Date.now()-t.timestamp,t.progress=e?r/a:null,o.fire("progress",t.progress)},()=>{o.fire("abort")},e=>{o.fire("meta",{size:t.size,filename:getFilenameFromHeaders("string"==typeof e?e:e.headers)})})):o.fire("error",{type:"error",body:"Can't load remote URL",code:400})},o=babelHelpers.extends({},on(),{setSource:e=>{t.source=e},getProgress:()=>t.progress,abort:()=>{t.request&&t.request.abort()},load:()=>{const e=t.source;o.fire("init",e),e instanceof File?o.fire("load",e):e instanceof Blob?o.fire("load",getFileFromBlob(e,getDateString())):isBase64DataURI(e)?o.fire("load",getFileFromBase64DataURI(e,getDateString())):r(e)}});return o},createFetchFunction=(e="",t)=>"function"==typeof t?t:t&&t.url?(r,o,a,i,n,s)=>{const l=sendRequest(r,e+t.url,babelHelpers.extends({},t,{responseType:"blob"}));return l.onload=(e=>{e.body=getFileFromBlob(e.body,getFilenameFromHeaders(e.headers)||getFilenameFromURL(r)||getDateString()),o(e)}),l.onerror=a,l.onprogress=i,l.onabort=n,l.onheaders=s,l}:null,createProcessorFunction=(e="",t,r)=>"function"==typeof t?t:t&&t.url?(o,a,i,n,s)=>{if(!o)return;var l=new FormData;l.append(r,o,o.name);const c=sendRequest(l,e+t.url,t);return c.onload=a,c.onerror=i,c.onprogress=n,c.onabort=s,c}:null,createRevertFunction=(e="",t)=>"function"==typeof t?t:t&&t.url?(r,o,a)=>{const i=sendRequest(r,e+t.url,t);return i.onload=o,i.onerror=a,i}:(e,t)=>t(),getRandomNumber=(e=0,t=1)=>e+Math.random()*(t-e),createPerceivedPerformanceUpdater=(e,t=1e3,r=0,o=25,a=250)=>{let i=null;const n=Date.now(),s=()=>{let r=Date.now()-n,l=getRandomNumber(o,a);r+l>t&&(l=r+l-t);let c=r/t;c>=1?e(1):(e(c),i=setTimeout(s,l))};return s(),{clear:()=>{clearTimeout(i)}}},createFileProcessor=e=>{const t={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:0,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},r=()=>{t.request&&(t.perceivedPerformanceUpdater.clear(),t.request.abort(),t.complete=!0,o.fire("abort",t.response?t.response.body:null))},o=babelHelpers.extends({},on(),{process:r=>{const a=()=>{o.fire("progress",o.getProgress())},i=()=>{t.complete=!0,o.fire("load",t.response.body)};o.fire("start"),t.timestamp=Date.now(),t.perceivedPerformanceUpdater=createPerceivedPerformanceUpdater(e=>{t.perceivedProgress=e,t.perceivedDuration=Date.now()-t.timestamp,a(),1===e&&t.response&&!t.complete&&i()},getRandomNumber(750,1500)),t.request=e(r,e=>{t.response="string"==typeof e?{type:"load",code:200,body:e,headers:{}}:e,t.duration=Date.now()-t.timestamp,t.perceivedProgress===t.progress&&i()},e=>{t.perceivedPerformanceUpdater.clear(),o.fire("error","string"==typeof e?{type:"error",code:0,body:e}:e)},(e,r,o)=>{t.duration=Date.now()-t.timestamp,t.progress=e?r/o:null,a()},()=>{t.perceivedPerformanceUpdater.clear(),o.fire("abort")})},abort:r,getProgress:()=>t.progress?Math.min(t.progress,t.perceivedProgress):null,getDuration:()=>Math.min(t.duration,t.perceivedDuration),reset:()=>{r(),t.complete=!1,t.perceivedProgress=0,t.progress=0,t.timestamp=null,t.perceivedDuration=0,t.duration=0,t.request=null,t.response=null}});return o},getFilenameWithoutExtension=e=>e.substr(0,e.lastIndexOf("."))||e,ItemStatus={INIT:1,IDLE:2,PROCESSING:3,PROCESSING_PAUSED:4,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,LOADING:7,LOAD_ERROR:8},createFileStub=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||isBase64DataURI(e)?t[0]=getDateString():isBase64DataURI(e)?(t[1]=e.length,t[2]=getMimeTypeFromBase64DataURI(e)):e instanceof File||(t[0]=getFilenameFromURL(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},createItem=(e=null,{onload:t})=>{const r=getUniqueId(),o={file:null,serverFileReference:e,status:ItemStatus.INIT,activeLoader:null,activeProcessor:null},a=e=>o.status=e,i=e=>{o.file instanceof Blob?(e.on("load",e=>{o.activeProcessor=null,o.serverFileReference=e,a(ItemStatus.PROCESSING_COMPLETE),n.fire("process-complete",e)}),e.on("start",()=>{n.fire("process-start")}),e.on("error",e=>{o.activeProcessor=null,a(ItemStatus.PROCESSING_ERROR),n.fire("process-error",e)}),e.on("abort",e=>{o.activeProcessor=null,o.serverFileReference=e,a(ItemStatus.IDLE),n.fire("process-abort")}),e.on("progress",e=>{a(ItemStatus.PROCESSING),n.fire("process-progress",e)}),e.process(o.file),o.activeProcessor=e):n.on("load",()=>{i(e)})},n=babelHelpers.extends({id:{get:()=>r},serverId:{get:()=>o.serverFileReference},status:{get:()=>o.status},filename:{get:()=>o.file.name},filenameWithoutExtension:{get:()=>getFilenameWithoutExtension(o.file.name)},fileExtension:{get:()=>getExtensionFromFilename(o.file.name)},fileType:{get:()=>o.file.type},fileSize:{get:()=>o.file.size},fileURL:{get:()=>{const e=URL.createObjectURL(o.file);return setTimeout(()=>{URL.revokeObjectURL(e)},0),e}},file:{get:()=>o.file},abortLoad:()=>{o.activeLoader&&o.activeLoader.abort()},retryLoad:()=>{o.activeLoader&&o.activeLoader.load()},abortProcessing:()=>{o.activeProcessor&&o.activeProcessor.abort()},load:(e,r)=>{o.file=createFileStub(e),r.on("init",()=>{n.fire("load-init"),n.fire("load-progress",null)}),r.on("meta",e=>{o.file.size=e.size,o.file.filename=e.filename,n.fire("load-meta")}),r.on("progress",e=>{a(ItemStatus.LOADING),n.fire("load-progress",e)}),r.on("error",e=>{a(ItemStatus.LOAD_ERROR),n.fire("load-request-error",e)}),r.on("abort",()=>{a(ItemStatus.INIT),n.fire("load-abort")}),r.on("load",e=>{o.activeLoader=null,t(e,e=>{o.file=e,a(ItemStatus.IDLE),n.fire("load")},t=>{o.file=e,n.fire("load-meta"),a(ItemStatus.LOAD_ERROR),n.fire("load-file-error",t)})}),r.setSource(e),r.load(),o.activeLoader=r},process:i,revert:e=>{null!==o.serverFileReference&&(e(o.serverFileReference,()=>{o.serverFileReference=null},e=>{}),a(ItemStatus.IDLE),n.fire("process-revert"))}},on());return createObject(n)},getItemById=(e,t)=>{const r=getItemIndexByQuery(e,t);if(!(r<0))return e[r]||null},removeItem=(e,t)=>{const r=e.findIndex(e=>e===t);return removeIndex(e,r),t},getItemByQueryFromState=(e,t)=>({query:r,success:o=(()=>{}),failure:a=(()=>{})}={})=>{const i=getItemByQuery(e.items,r);i?t(i,o,a):a(createResponse("error",0,"Item not found"))},actions=(e,t,r)=>({ABORT_ALL:()=>{t("GET_ITEMS").forEach(e=>{e.abortLoad(),e.abortProcessing()})},DID_SET_FILES:({value:t=[]})=>{[...r.items].forEach(t=>{e("REMOVE_ITEM",{query:t})}),t.forEach((t,r)=>{e("ADD_ITEM",{source:t,interactionMethod:InteractionMethod.NONE,index:r})})},ADD_ITEM:({source:o,index:a,interactionMethod:i,success:n=(()=>{}),failure:s=(()=>{})})=>{if(isEmpty(o))return void s(createResponse("error",0,"No source"));if(o instanceof Blob&&r.options.ignoredFiles.includes(o.name.toLowerCase()))return;if(!hasRoomForItem(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){const t=createResponse("warning",0,"Max files");return e("DID_THROW_MAX_FILES",{source:o,error:t}),void s(t)}e("REMOVE_ITEM",{query:r.items[0].id})}const l=r.options.serverFileReferenceFormat.test(o),c=createItem(l?o:null,{onload:(e,r,o)=>{l?r(e):applyFilterChain("LOAD_FILE",e,{query:t}).then(r).catch(o)}});insertItem(r.items,c,a);const p=c.id;c.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:p})}),c.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:p})}),c.on("load-progress",t=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:t})}),c.on("load-request-error",t=>{if(t.code>=400&&t.code<500)return e("DID_THROW_ITEM_INVALID",{id:p,error:t,status:{main:r.options.labelFileLoadError,sub:`${t.code} (${t.body})`}}),void s(t);e("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:t,status:{main:r.options.labelFileLoadError,sub:r.options.labelTapToRetry}})}),c.on("load-file-error",t=>{e("DID_THROW_ITEM_INVALID",{id:p,status:t})}),c.on("load-abort",()=>{e("REMOVE_ITEM",{query:p})}),c.on("load",()=>{e("DID_LOAD_ITEM",{id:p}),n(createItemAPI(c)),l?e("DID_COMPLETE_ITEM_PROCESSING",{id:p,serverFileReference:o}):t("IS_ASYNC")&&r.options.instantUpload&&e("PROCESS_ITEM",{query:p})}),c.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:p})}),c.on("process-progress",t=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:t})}),c.on("process-error",t=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,status:{main:r.options.labelFileProcessingError,sub:r.options.labelTapToRetry}})}),c.on("process-abort",t=>{e("DID_ABORT_ITEM_PROCESSING",{id:p}),e("REVERT_ITEM_PROCESSING",{query:p})}),c.on("process-complete",t=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:p,serverFileReference:t})}),c.on("process-revert",()=>{r.options.instantUpload?e("REMOVE_ITEM",{query:p}):e("DID_REVERT_ITEM_PROCESSING",{id:p})});const{url:d,restore:u,fetch:m}=r.options.server||{};c.load(o,createFileLoader(createFetchFunction(d,l?u:m))),e("DID_ADD_ITEM",{id:p,index:a,interactionMethod:i})},RETRY_ITEM_LOAD:getItemByQueryFromState(r,e=>{e.retryLoad()}),PROCESS_ITEM:getItemByQueryFromState(r,(e,t,o)=>{e.onOnce("process-complete",()=>{t(e)}),e.onOnce("process-error",e=>{o(e)}),e.process(createFileProcessor(createProcessorFunction(r.options.server.url,r.options.server.process,r.options.name)))}),RETRY_ITEM_PROCESSING:getItemByQueryFromState(r,t=>{e("PROCESS_ITEM",{query:t})}),REMOVE_ITEM:getItemByQueryFromState(r,(t,r)=>{const o=t.id;e("DID_REMOVE_ITEM",{id:o,item:t}),e("SPLICE_ITEM",{id:o,item:t}),r(createItemAPI(t))}),SPLICE_ITEM:({id:e})=>removeItem(r.items,getItemById(r.items,e)),ABORT_ITEM_LOAD:getItemByQueryFromState(r,e=>{e.abortLoad()}),ABORT_ITEM_PROCESSING:getItemByQueryFromState(r,e=>{e.abortProcessing()}),REVERT_ITEM_PROCESSING:getItemByQueryFromState(r,e=>{e.revert(createRevertFunction(r.options.server.url,r.options.server.revert))}),SET_OPTIONS:({options:t})=>{forin(t,(t,r)=>{e(`SET_${fromCamels(t,"_").toUpperCase()}`,{value:r})})}}),createElement$1=e=>document.createElement(e),formatFilename=e=>decodeURI(e),text=(e,t)=>{let r=e.childNodes[0];r?t!==r.nodeValue&&(r.nodeValue=t):(r=document.createTextNode(t),e.appendChild(r))},polarToCartesian=(e,t,r,o)=>{const a=(o-90)*Math.PI/180;return{x:e+r*Math.cos(a),y:t+r*Math.sin(a)}},describeArc=(e,t,r,o,a)=>{const i=polarToCartesian(e,t,r,a),n=polarToCartesian(e,t,r,o),s=a-o<=180?"0":"1";return["M",i.x,i.y,"A",r,r,0,s,0,n.x,n.y].join(" ")},percentageArc=(e,t,r,o,a)=>describeArc(e,t,r,360*o,360*a),create$7=({root:e,props:t})=>{t.progress=0,t.offset=null,t.opacity=0;const r=createElement("svg");e.ref.path=createElement("path",{"stroke-width":2,"stroke-linecap":"round"}),r.appendChild(e.ref.path),e.appendChild(r)},write$4=({root:e,props:t,timestamp:r})=>{if(0===t.opacity)return;const o=parseInt(attr(e.ref.path,"stroke-width"),10),a=.5*e.rect.element.width;t.offset||(t.offset=r);const i=r-t.offset,n=null===t.progress?.001*i:0,s=percentageArc(a,a,a-o,n,null===t.progress?n+.5:Math.min(.999999,t.progress));attr(e.ref.path,"d",s),attr(e.ref.path,"stroke-opacity",0===t.progress?0:1)},progressIndicator=createView({tag:"div",name:"progress-indicator",create:create$7,write:write$4,mixins:{apis:["progress"],styles:["opacity","rotateZ"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),create$8=({root:e,props:t})=>{e.element.title=t.label,e.element.innerHTML=t.icon,t.disabled=!1},write$5=({root:e,props:t})=>{text(e.element,t.label),0!==t.opacity||t.disabled?t.opacity>0&&t.disabled&&(t.disabled=!1,e.element.removeAttribute("disabled")):(t.disabled=!0,attr(e.element,"disabled","disabled"))},fileActionButton=createView({tag:"button",attributes:{type:"button"},name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:create$8,write:write$5}),toNaturalFileSize=(e,t=".")=>(e=Math.round(Math.abs(e)))<1e3?`${e} bytes`:e<MB?`${Math.floor(e/KB)} KB`:e<GB?`${removeDecimalsWhenZero(e/MB,1,t)} MB`:`${removeDecimalsWhenZero(e/GB,2,t)} GB`,KB=1e3,MB=1e6,GB=1e9,removeDecimalsWhenZero=(e,t,r)=>e.toFixed(t).split(".").filter(e=>"0"!==e).join(r),create$9=({root:e,props:t})=>{const r=createElement$1("span");r.className="filepond--file-info-main",attr(r,"aria-hidden","true"),e.appendChild(r),e.ref.fileName=r;const o=createElement$1("span");o.className="filepond--file-info-sub",e.appendChild(o),e.ref.fileSize=o,text(o,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),text(r,formatFilename(e.query("GET_ITEM_NAME",t.id)))},updateFile=({root:e,props:t})=>{text(e.ref.fileSize,toNaturalFileSize(e.query("GET_ITEM_SIZE",t.id))),text(e.ref.fileName,formatFilename(e.query("GET_ITEM_NAME",t.id)))},updateFileSizeOnError=({root:e,props:t})=>{isInt(e.query("GET_ITEM_SIZE",t.id))||text(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},fileInfo=createView({name:"file-info",write:createRoute({DID_LOAD_ITEM:updateFile,DID_UPDATE_ITEM_META:updateFile,DID_THROW_ITEM_LOAD_ERROR:updateFileSizeOnError,DID_THROW_ITEM_INVALID:updateFileSizeOnError}),create:create$9,mixins:{styles:["translateX"],animations:{translateX:"spring"}}}),toPercentage=e=>Math.round(100*e),create$10=({root:e,props:t})=>{const r=createElement$1("span");r.className="filepond--file-status-main",e.appendChild(r),e.ref.main=r;const o=createElement$1("span");o.className="filepond--file-status-sub",e.appendChild(o),e.ref.sub=o,didSetItemLoadProgress({root:e,action:{progress:null}})},didSetItemLoadProgress=({root:e,action:t})=>{const r=null===t.progress?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${toPercentage(t.progress)}%`;text(e.ref.main,r),text(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},didSetItemProcessProgress=({root:e,action:t})=>{const r=null===t.progress?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${toPercentage(t.progress)}%`;text(e.ref.main,r),text(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},didAbortItemProcessing=({root:e})=>{text(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),text(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},didCompleteItemProcessing$1=({root:e})=>{text(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),text(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},didLoadItem=({root:e})=>{text(e.ref.main,""),text(e.ref.sub,"")},didThrowError=({root:e,action:t})=>{text(e.ref.main,t.status.main),text(e.ref.sub,t.status.sub)},fileStatus=createView({name:"file-status",write:createRoute({DID_LOAD_ITEM:didLoadItem,DID_ABORT_ITEM_PROCESSING:didAbortItemProcessing,DID_COMPLETE_ITEM_PROCESSING:didCompleteItemProcessing$1,DID_UPDATE_ITEM_PROCESS_PROGRESS:didSetItemProcessProgress,DID_UPDATE_ITEM_LOAD_PROGRESS:didSetItemLoadProgress,DID_THROW_ITEM_LOAD_ERROR:didThrowError,DID_THROW_ITEM_INVALID:didThrowError,DID_THROW_ITEM_PROCESSING_ERROR:didThrowError}),create:create$10,mixins:{styles:["translateX","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring"}}}),Buttons={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"PROCESS_ITEM",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing"}},ButtonKeys=[];forin(Buttons,e=>{ButtonKeys.push(e)});const create$6=({root:e,props:t})=>{e.ref.controls=[],e.ref.info=e.appendChildView(e.createChildView(fileInfo,{id:t.id})),e.ref.status=e.appendChildView(e.createChildView(fileStatus,{id:t.id}));const r=e.query("IS_ASYNC")?ButtonKeys.concat():ButtonKeys.filter(e=>!/Process/.test(e));forin(Buttons,(o,a)=>{const i=e.createChildView(fileActionButton,{label:e.query(a.label),icon:e.query(a.icon),opacity:0});r.includes(o)&&e.appendChildView(i),i.element.classList.add(a.className),i.on("click",()=>{e.dispatch(a.action,{query:t.id})}),e.ref[`button${o}`]=i,e.ref.controls.push(i)}),e.ref.loadProgressIndicator=e.appendChildView(e.createChildView(progressIndicator,{opacity:0})),e.ref.loadProgressIndicator.element.classList.add("filepond--load-indicator"),e.ref.processProgressIndicator=e.appendChildView(e.createChildView(progressIndicator,{opacity:0})),e.ref.processProgressIndicator.element.classList.add("filepond--process-indicator"),e.ref.controls.push(e.ref.loadProgressIndicator,e.ref.processProgressIndicator),e.ref.controls.push(e.ref.info,e.ref.status)},calculateFileInfoOffset=e=>e.ref.buttonRemoveItem.rect.element.width+e.ref.buttonRemoveItem.rect.element.left,idleState=[{opacity:0},{opacity:0},{opacity:1},{opacity:1},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{translateX:calculateFileInfoOffset},{translateX:calculateFileInfoOffset,opacity:0}],actionStates={DID_THROW_ITEM_INVALID:[{opacity:0},{opacity:0},{opacity:1},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{translateX:calculateFileInfoOffset},{translateX:calculateFileInfoOffset,opacity:1}],DID_START_ITEM_LOAD:[{opacity:1},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:1},{opacity:0},{translateX:0},{translateX:0,opacity:1}],DID_THROW_ITEM_LOAD_ERROR:[{opacity:0},{opacity:1},{opacity:1},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{translateX:calculateFileInfoOffset},{translateX:0,opacity:1}],DID_LOAD_ITEM:idleState,DID_START_ITEM_PROCESSING:[{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:1},{opacity:0},{opacity:0},{opacity:0},{opacity:1},{translateX:0},{translateX:0,opacity:1}],DID_ABORT_ITEM_PROCESSING:idleState,DID_THROW_ITEM_PROCESSING_ERROR:[{opacity:0},{opacity:0},{opacity:1},{opacity:0},{opacity:0},{opacity:1},{opacity:0},{opacity:0},{opacity:0},{translateX:calculateFileInfoOffset},{translateX:0,opacity:1}],DID_COMPLETE_ITEM_PROCESSING:[{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:0},{opacity:1},{opacity:0},{opacity:0},{translateX:0},{translateX:0,opacity:1}],DID_REVERT_ITEM_PROCESSING:idleState},write$3=({root:e,actions:t,props:r})=>{route$3({root:e,actions:t,props:r});let o=[...t].reverse().find(e=>actionStates[e.type]);r.currentState=actionStates[(o||{}).type]||r.currentState,o&&("DID_COMPLETE_ITEM_PROCESSING"===o.type?e.element.dataset.fileState="processing-complete":"DID_THROW_ITEM_INVALID"===o.type?e.element.dataset.fileState="load-invalid":"DID_THROW_ITEM_LOAD_ERROR"===o.type?e.element.dataset.fileState="load-error":"DID_THROW_ITEM_PROCESSING_ERROR"===o.type?e.element.dataset.fileState="processing-error":e.element.dataset.fileState=""),r.currentState&&e.ref.controls.forEach((t,o)=>{forin(r.currentState[o],(r,o)=>{t[r]="function"==typeof o?o(e):o})})},route$3=createRoute({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.progress=t.progress}}),file=createView({create:create$6,write:write$3,didCreateView:e=>{applyFilters("CREATE_VIEW",babelHelpers.extends({},e,{view:e}))},name:"file"}),create$5=({root:e,props:t})=>{e.ref.fileName=createElement$1("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(file,{id:t.id}));const r=createElement$1("input");r.type="hidden",r.name=e.query("GET_NAME"),e.ref.dataContainer=r,e.appendChild(r)},updateLegend=({root:e,props:t})=>{text(e.ref.fileName,formatFilename(e.query("GET_ITEM_NAME",t.id)))},didRemoveItem=({root:e,action:t})=>{e.ref.dataContainer.removeAttribute("value")},didCompleteItemProcessing=({root:e,action:t})=>{e.ref.dataContainer.value=t.serverFileReference},didRevertItemProcessing=({root:e,action:t})=>{e.ref.dataContainer.removeAttribute("value")},fileWrapper=createView({create:create$5,write:createRoute({DID_LOAD_ITEM:updateLegend,DID_REMOVE_ITEM:didRemoveItem,DID_COMPLETE_ITEM_PROCESSING:didCompleteItemProcessing,DID_REVERT_ITEM_PROCESSING:didRevertItemProcessing}),tag:"fieldset",name:"file-wrapper"}),create$4=({root:e,props:t})=>{e.ref.fileWrapper=e.appendChildView(e.createChildView(fileWrapper,{id:t.id})),t.markedForRemoval=!1},item=createView({create:create$4,tag:"li",name:"item",mixins:{apis:["id","markedForRemoval"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),create$3=({root:e,props:t})=>{attr(e.element,"role","list")},addItemView=({root:e,action:t})=>{const{id:r,index:o,interactionMethod:a}=t,i={opacity:0};a===InteractionMethod.DROP&&(i.scaleX=.8,i.scaleY=.8,i.translateY=null),a===InteractionMethod.BROWSE&&(i.translateY=-30),a===InteractionMethod.API&&(i.translateX=-100,i.translateY=null);const n=e.createChildView(item,babelHelpers.extends({id:r},i));e.appendChildView(n,o)},removeItemView=({root:e,action:t})=>{const{id:r}=t,o=e.childViews.find(e=>e.id===r);o&&(o.scaleX=.9,o.scaleY=.9,o.opacity=0,o.markedForRemoval=!0)},route$2=createRoute({DID_ADD_ITEM:addItemView,DID_REMOVE_ITEM:removeItemView}),dragTranslation=(e,t,r)=>e-1===t?r/6:e===t?r/2:e+1===t?-r/2:e+2===t?-r/6:0,write$2=({root:e,props:t,actions:r})=>{route$2({root:e,props:t,actions:r});let o=0;e.childViews.forEach((e,r)=>{const a=e.rect;e.markedForRemoval||(e.scaleX=1,e.scaleY=1,e.opacity=1),e.translateX=0,e.translateY=o+(t.dragIndex>-1?dragTranslation(r,t.dragIndex,10):0),o+=a.outer.height}),e.childViews.filter(e=>e.markedForRemoval&&0===e.opacity).forEach(t=>{e.removeChildView(t)})},filterSetItemActions=(e,t)=>t.filter(t=>!t.data||!t.data.id||e.id===t.data.id),list=createView({create:create$3,write:write$2,tag:"ul",name:"list",filterFrameActionsForChild:filterSetItemActions,mixins:{apis:["dragIndex"]}}),getItemIndexByPosition=(e,t)=>{let r=0;const o=e.childViews,a=o.length;for(;r<a;r++){const e=o[r].rect.outer,a=e.top+.5*e.height;if(t.top<a)return r}return a},create$2=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(list)),t.dragCoordinates=null,t.overflowing=!1},storeDragCoordinates=({root:e,props:t,action:r})=>{t.dragCoordinates={left:r.position.scopeLeft,top:r.position.scopeTop-e.rect.outer.top+e.rect.element.scrollTop}},clearDragCoordinates=({props:e})=>{e.dragCoordinates=null},route$1=createRoute({DID_DRAG:storeDragCoordinates,DID_END_DRAG:clearDragCoordinates}),write$1=({root:e,props:t,actions:r})=>{route$1({root:e,props:t,actions:r}),e.ref.list.dragIndex=t.dragCoordinates?getItemIndexByPosition(e.ref.list,t.dragCoordinates):-1,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),!t.overflowing&&t.overflow&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=t.overflow-e.translateY)},listScroller=createView({create:create$2,write:write$1,name:"list-scroller",mixins:{apis:["overflow"],styles:["height","translateY"]}}),create$11=({root:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:"spring"},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:"spring"},styles:["translateY"]}}].forEach(t=>{createSection(e,t)})},createSection=(e,t)=>{const r=createView({name:`panel-${t.name}`,mixins:t.mixins}),o=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(o)},write$6=({root:e,props:t})=>{if(!t.height)return;const r=e.ref.top.rect.element,o=e.ref.bottom.rect.element,a=Math.max(r.height+o.height,t.height);e.ref.center.translateY=r.height,e.ref.center.scaleY=Math.ceil(a-r.height-o.height),e.ref.bottom.translateY=a-o.height},panel=createView({name:"panel",write:write$6,create:create$11,mixins:{apis:["height"]}}),attrToggle=(e,t,r,o="")=>{r?attr(e,t,o):e.removeAttribute(t)},resetFileInput=e=>{if(e&&""!==e.value){try{e.value=""}catch(e){}if(e.value){const t=createElement$1("form"),r=e.parentNode,o=e.nextSibling;t.appendChild(e),t.reset(),o?r.insertBefore(e,o):r.appendChild(e)}}},create$12=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,attr(e.element,"aria-controls",`filepond--assistant-${t.id}`),attr(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),e.element.addEventListener("change",()=>{if(!e.element.value)return;const r=[...e.element.files];setTimeout(()=>{t.onload(r),resetFileInput(e.element)},250)})},setAcceptedFileTypes=({root:e,action:t})=>{attrToggle(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},toggleAllowMultiple=({root:e,action:t})=>{attrToggle(e.element,"multiple",t.value)},toggleAllowBrowse$1=({root:e,action:t})=>{attrToggle(e.element,"disabled",!t.value)},toggleRequired=({root:e,action:t})=>{t.value?0===e.query("GET_TOTAL_ITEMS")&&attrToggle(e.element,"required",!0):attrToggle(e.element,"required",!1)},setCaptureMethod=({root:e,action:t})=>{attrToggle(e.element,"capture",!!t.value,!0===t.value?"":t.value)},updateRequiredStatus=({root:e,props:t})=>{e.query("GET_TOTAL_ITEMS")>0?attrToggle(e.element,"required",!1):e.query("GET_REQUIRED")&&attrToggle(e.element,"required",!0)},browser=createView({tag:"input",name:"browser",attributes:{type:"file"},create:create$12,write:createRoute({DID_ADD_ITEM:updateRequiredStatus,DID_REMOVE_ITEM:updateRequiredStatus,DID_SET_ALLOW_BROWSE:toggleAllowBrowse$1,DID_SET_ALLOW_MULTIPLE:toggleAllowMultiple,DID_SET_ACCEPTED_FILE_TYPES:setAcceptedFileTypes,DID_SET_CAPTURE_METHOD:setCaptureMethod,DID_SET_REQUIRED:toggleRequired})}),Key={ENTER:13,SPACE:32},create$13=({root:e,props:t})=>{const r=createElement$1("label");attr(r,"for",`filepond--browser-${t.id}`),attr(r,"id",`filepond--drop-label-${t.id}`),attr(r,"aria-hidden","true"),r.addEventListener("keydown",t=>{t.keyCode!==Key.ENTER&&t.keyCode!==Key.SPACE||(t.preventDefault(),e.ref.label.click())}),e.appendChild(r),e.ref.label=r},updateLabelValue=(e,t)=>{e.innerHTML=t;const r=e.querySelector(".filepond--label-action");return r&&attr(r,"tabindex","0"),t},dropLabel=createView({name:"drop-label",create:create$13,write:createRoute({DID_SET_LABEL_IDLE:({root:e,action:t,props:r})=>{r.caption=updateLabelValue(e.ref.label,t.value)}}),mixins:{apis:["caption"],styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),blob=createView({name:"drip-blob",mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),addBlob=({root:e})=>{const t=.5*e.rect.element.width,r=.5*e.rect.element.height;e.ref.blob=e.appendChildView(e.createChildView(blob,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:r}))},moveBlob=({root:e,action:t})=>{e.ref.blob?(e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1):addBlob({root:e})},hideBlob=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},explodeBlob=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},write$7=({root:e,props:t,actions:r})=>{route$4({root:e,props:t,actions:r});const{blob:o}=e.ref;0===r.length&&o&&0===o.opacity&&(e.removeChildView(o),e.ref.blob=null)},route$4=createRoute({DID_DRAG:moveBlob,DID_DROP:explodeBlob,DID_END_DRAG:hideBlob}),drip=createView({name:"drip",write:write$7}),getRootNode=e=>"getRootNode"in e?e.getRootNode():document,requestDataTransferItems=e=>new Promise((t,r)=>{const o=getLinks(e);o.length?t(o):getFiles(e).then(t)}),getFiles=e=>new Promise((t,r)=>{const o=(e.items?[...e.items]:[]).filter(e=>isFileSystemItem(e)).map(e=>getFilesFromItem(e));o.length?Promise.all(o).then(e=>{const r=[];e.forEach(e=>{r.push(...e)}),t(r.filter(e=>e))}):t([...e.files])}),isFileSystemItem=e=>{if(isEntry(e)){const t=getAsEntry(e);if(t)return t.isFile||t.isDirectory}return"file"===e.kind},getFilesFromItem=e=>new Promise((t,r)=>{isDirectoryEntry(e)?getFilesInDirectory(getAsEntry(e)).then(t):t([e.getAsFile()])}),getFilesInDirectory=e=>new Promise((t,r)=>{const o=[];let a=0;const i=e=>{e.createReader().readEntries(e=>{e.forEach(e=>{e.isDirectory?i(e):(a++,e.file(e=>{o.push(e),a===o.length&&t(o)}))})})};i(e)}),isDirectoryEntry=e=>isEntry(e)&&(getAsEntry(e)||{}).isDirectory,isEntry=e=>"webkitGetAsEntry"in e,getAsEntry=e=>e.webkitGetAsEntry(),getLinks=e=>{let t=[];try{if((t=getLinksFromTransferMetaData(e)).length)return t;t=getLinksFromTransferURLData(e)}catch(e){}return t},getLinksFromTransferURLData=e=>{let t=e.getData("url");return"string"==typeof t&&t.length?[t]:[]},getLinksFromTransferMetaData=e=>{let t=e.getData("text/html");if("string"==typeof t&&t.length){const e=t.match(/src\s*=\s*"(.+?)"/);if(e)return[e[1]]}return[]},dragNDropObservers=[],eventPosition=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.layerX||e.offsetX,scopeTop:e.layerY||e.offsetY}),createDragNDropClient=(e,t,r)=>{const o=getDragNDropObserver(t),a={element:e,filterElement:r,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return a.destroy=o.addListener(a),a},getDragNDropObserver=e=>{const t=dragNDropObservers.find(t=>t.element===e);if(t)return t;const r=createDragNDropObserver(e);return dragNDropObservers.push(r),r},createDragNDropObserver=e=>{const t=[],r={dragenter:dragenter,dragover:dragover,dragleave:dragleave,drop:drop},o={};forin(r,(r,a)=>{o[r]=a(e,t),e.addEventListener(r,o[r],!1)});const a={element:e,addListener:i=>(t.push(i),()=>{t.splice(t.indexOf(i),1),0===t.length&&(dragNDropObservers.splice(dragNDropObservers.indexOf(a),1),forin(r,t=>{e.removeEventListener(t,o[t],!1)}))})};return a},isEventTarget=(e,t)=>{const r=getRootNode(t).elementFromPoint(e.pageX-window.scrollX,e.pageY-window.scrollY);return r===t||t.contains(r)};let initialTarget=null;const dragenter=(e,t)=>e=>{e.preventDefault(),initialTarget=e.target,t.forEach(t=>{const{element:r,onenter:o}=t;isEventTarget(e,r)&&(t.state="enter",o(eventPosition(e)))})},dragover=(e,t)=>e=>{e.preventDefault();const r=e.dataTransfer;requestDataTransferItems(r).then(o=>{t.some(t=>{const{filterElement:a,element:i,onenter:n,onexit:s,ondrag:l,allowdrop:c}=t;r.dropEffect="copy";const p=c(o);if(p)if(isEventTarget(e,i)){if(null===t.state)return t.state="enter",void n(eventPosition(e));if(t.state="over",a&&!p)return void(r.dropEffect="none");l(eventPosition(e))}else a&&(r.dropEffect="none"),t.state&&(t.state=null,s(eventPosition(e)));else r.dropEffect="none"})})},drop=(e,t)=>e=>{e.preventDefault();const r=e.dataTransfer;requestDataTransferItems(r).then(r=>{t.forEach(t=>{const{filterElement:o,element:a,ondrop:i,onexit:n,allowdrop:s}=t;t.state=null;s(r)?o&&!isEventTarget(e,a)||i(eventPosition(e),r):n(eventPosition(e))})})},dragleave=(e,t)=>e=>{initialTarget===e.target&&t.forEach(t=>{const{onexit:r}=t;t.state=null,r(eventPosition(e))})},createHopper=(e,t,r)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:o,requiresDropOnElement:a}=r,i=createDragNDropClient(e,o?document.documentElement:e,a);let n="",s="";i.allowdrop=(e=>t(e)),i.ondrop=((e,r)=>{t(r)?(s="drag-drop",l.onload(r,e)):l.ondragend(e)}),i.ondrag=(e=>{l.ondrag(e)}),i.onenter=(e=>{s="drag-over",l.ondragstart(e)}),i.onexit=(e=>{s="drag-exit",l.ondragend(e)});const l={updateHopperState:()=>{n!==s&&(e.dataset.hopperState=s,n=s)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{i.destroy()}};return l};let listening=!1;const listeners$1=[],handlePaste=e=>{requestDataTransferItems(e.clipboardData).then(e=>{e.length&&listeners$1.forEach(t=>t(e))})},listen=e=>{listeners$1.includes(e)||(listeners$1.push(e),listening||(listening=!0,document.addEventListener("paste",handlePaste)))},unlisten=e=>{arrayRemove(listeners$1,listeners$1.indexOf(e)),0===listeners$1.length&&(document.removeEventListener("paste",handlePaste),listening=!1)},createPaster=()=>{const e=e=>{t.onload(e)},t={destroy:()=>{unlisten(e)},onload:()=>{}};return listen(e),t},debounce=(e,t=16,r=!0)=>{let o=Date.now(),a=null;return(...i)=>{clearTimeout(a);const n=Date.now()-o,s=()=>{o=Date.now(),e(...i)};n<t?r||(a=setTimeout(s,t-n)):s()}},create$14=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,attr(e.element,"role","status"),attr(e.element,"aria-live","polite"),attr(e.element,"aria-relevant","additions")};let addFilesNotificationTimeout=null,notificationClearTimeout=null;const filenames=[],assist=(e,t)=>{e.element.textContent=t},clear=e=>{e.element.textContent=""},listModified=(e,t,r)=>{const o=e.query("GET_TOTAL_ITEMS");assist(e,`${r} ${t}, ${o} ${1===o?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(notificationClearTimeout),notificationClearTimeout=setTimeout(()=>{clear(e)},1500)},isUsingFilePond=e=>e.element.parentNode.contains(document.activeElement),itemAdded=({root:e,action:t})=>{if(!isUsingFilePond(e))return;e.element.textContent="";const r=e.query("GET_ITEM",t.id);filenames.push(r.filename),clearTimeout(addFilesNotificationTimeout),addFilesNotificationTimeout=setTimeout(()=>{listModified(e,filenames.join(", "),e.query("GET_LABEL_FILE_ADDED")),filenames.length=0},750)},itemRemoved=({root:e,action:t})=>{if(!isUsingFilePond(e))return;const r=t.item;listModified(e,r.filename,e.query("GET_LABEL_FILE_REMOVED"))},itemProcessed=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,o=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");assist(e,`${r} ${o}`)},itemProcessedUndo=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,o=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");assist(e,`${r} ${o}`)},itemError=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;assist(e,`${t.status.main} ${r} ${t.status.sub}`)},assistant=createView({create:create$14,write:createRoute({DID_LOAD_ITEM:itemAdded,DID_REMOVE_ITEM:itemRemoved,DID_COMPLETE_ITEM_PROCESSING:itemProcessed,DID_ABORT_ITEM_PROCESSING:itemProcessedUndo,DID_REVERT_ITEM_PROCESSING:itemProcessedUndo,DID_THROW_ITEM_LOAD_ERROR:itemError,DID_THROW_ITEM_INVALID:itemError,DID_THROW_ITEM_PROCESSING_ERROR:itemError}),tag:"span",name:"assistant"}),create$1=({root:e,props:t})=>{e.ref.label=e.appendChildView(e.createChildView(dropLabel,babelHelpers.extends({},t,{translateY:null}))),e.ref.list=e.appendChildView(e.createChildView(listScroller,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(panel)),e.ref.panel.element.classList.add("filepond--panel-root"),e.ref.assistant=e.appendChildView(e.createChildView(assistant,babelHelpers.extends({},t)))},write=({root:e,props:t,actions:r})=>{route({root:e,props:t,actions:r});const{hopper:o,label:a,list:i,panel:n,browser:s}=e.ref,l=e.query("GET_ALLOW_MULTIPLE"),c=e.query("GET_TOTAL_ITEMS"),p=e.query("GET_MAX_FILES"),d=l?c===p:1===c,u=[...i.childViews[0].childViews],m=[i],f=r.find(e=>"DID_ADD_ITEM"===e.type);if(d&&f){const e=f.data.interactionMethod;a.opacity=0,l?a.translateY=-a.rect.element.height:e===InteractionMethod.API?a.translateX=40:a.translateY=e===InteractionMethod.BROWSE?40:-40}else d||(a.opacity=1,a.translateY=e.rect.element.paddingTop,a.translateX=0,m.push(a),u.push(a));if(o&&o.updateHopperState(),!a.caption)return;i.translateY=l?a.rect.outer.bottom:e.rect.element.paddingTop;const g=calculateRootBoundingBoxHeight(e,t),E=calculateChildrenBoundingBoxHeight(u),I=calculateChildrenVisualHeight(m),T=c>0?.5*e.rect.element.paddingTop:0;if(g.fixedHeight)n.height=g.fixedHeight+e.rect.element.paddingTop,i.overflow=E>n.height?n.height:null;else if(g.cappedHeight){const t=Math.min(g.cappedHeight,E);e.height=t+T,n.height=Math.min(g.cappedHeight+e.rect.element.paddingTop,I+T),i.overflow=E>n.height?n.height:null}else e.height=E+T,n.height=I+T},calculateChildrenVisualHeight=e=>e.reduce((e,t)=>{const r=t.rect.outer.bottom;return r>e&&(e=r),e},0),calculateRootBoundingBoxHeight=(e,t)=>{if(t.boxBounding)return t.boxBounding;const r=parseInt(e.style.height,10)||null,o=parseInt(e.style.maxHeight,10)||null,a=0===r?null:r;return t.boxBounding={cappedHeight:o,fixedHeight:a},t.boxBounding},calculateChildrenBoundingBoxHeight=e=>e.reduce((e,t)=>e+t.rect.inner.bottom+t.rect.element.marginBottom,0),toggleAllowDrop=({root:e,props:t,action:r})=>{if(r.value&&!e.ref.hopper){const t=createHopper(e.element,t=>{const r=e.query("GET_ALLOW_REPLACE"),o=e.query("GET_ALLOW_MULTIPLE"),a=e.query("GET_TOTAL_ITEMS");let i=e.query("GET_MAX_TOTAL_ITEMS");const n=t.length;if(!o&&n>1)return!1;return!(isInt(i=o?i:r?i:1)&&a+n>i)&&t.every(t=>applyFilters("ALLOW_HOPPER_ITEM",t,{query:e.query}).every(e=>!0===e))},{catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});t.onload=((t,r)=>{const o=e.ref.list.childViews[0],a=getItemIndexByPosition(o,{left:r.scopeLeft,top:r.scopeTop-e.ref.list.rect.outer.top+e.ref.list.element.scrollTop});forEachDelayed(t,t=>{e.dispatch("ADD_ITEM",{interactionMethod:InteractionMethod.DROP,source:t,index:a})}),e.dispatch("DID_DROP",{position:r}),e.dispatch("DID_END_DRAG",{position:r})}),t.ondragstart=(t=>{e.dispatch("DID_START_DRAG",{position:t})}),t.ondrag=debounce(t=>{e.dispatch("DID_DRAG",{position:t})}),t.ondragend=(t=>{e.dispatch("DID_END_DRAG",{position:t})}),e.ref.hopper=t,e.ref.drip=e.appendChildView(e.createChildView(drip))}else!r.value&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},toggleAllowBrowse=({root:e,props:t,action:r})=>{r.value?e.ref.browser=e.appendChildView(e.createChildView(browser,babelHelpers.extends({},t,{onload:t=>{forEachDelayed(t,t=>{e.dispatch("ADD_ITEM",{interactionMethod:InteractionMethod.BROWSE,source:t,index:0})})}})),0):e.ref.browser&&e.removeChildView(e.ref.browser)},toggleAllowPaste=({root:e,action:t})=>{t.value?(e.ref.paster=createPaster(),e.ref.paster.onload=(t=>{forEachDelayed(t,t=>{e.dispatch("ADD_ITEM",{interactionMethod:InteractionMethod.PASTE,source:t,index:0})})})):e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},route=createRoute({DID_SET_ALLOW_BROWSE:toggleAllowBrowse,DID_SET_ALLOW_DROP:toggleAllowDrop,DID_SET_ALLOW_PASTE:toggleAllowPaste}),root=createView({name:"root",create:create$1,write:write,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy()},mixins:{styles:["height"]}}),createApp$1=()=>{let e=null;const t=getOptions(),r=createStore(createInitialState(t),[queries,createOptionQueries(t)],[actions,createOptionActions(t)]),o=root(r,{id:getUniqueId()});o.element.classList.add("filepond--plugin");const a={_read:()=>{o._read()},_write:e=>{const t=r.processActionQueue().filter(e=>!/^SET_/.test(e.type));s(t),o._write(e,t)}},i=e=>t=>{const o={type:e};return t?(t.error&&(o.status=babelHelpers.extends({},t.error)),t.source?o.file=t.source:(t.item||t.id)&&(o.file=createItemAPI(t.item?t.item:r.query("GET_ITEM",t.id))),/progress/.test(e)&&(o.progress=t.progress),o):o},n={DID_DESTROY:i("destroy"),DID_INIT:i("init"),DID_THROW_MAX_FILES:i("warning"),DID_START_ITEM_LOAD:i("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:i("addfileprogress"),DID_LOAD_ITEM:i("addfile"),DID_THROW_ITEM_INVALID:i("error"),DID_THROW_ITEM_LOAD_ERROR:i("error"),DID_START_ITEM_PROCESSING:i("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:i("processfileprogress"),DID_ABORT_ITEM_PROCESSING:i("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:i("processfile"),DID_REVERT_ITEM_PROCESSING:i("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:i("error"),SPLICE_ITEM:i("removefile")},s=e=>{e.length&&e.forEach(e=>{if(!n[e.type])return;(e=>{const t=babelHelpers.extends({pond:d},e);delete t.type,o.element.dispatchEvent(new CustomEvent(`FilePond:${e.type}`,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));const a=Object.keys(e).filter(e=>"type"!==e).map(t=>e[t]);d.fire(e.type,...a);const i=r.query(`GET_ON${e.type.toUpperCase()}`);i&&i(...a)})(n[e.type](e.data))})},l=(e,t={})=>new Promise((o,a)=>{r.dispatch("ADD_ITEM",{interactionMethod:InteractionMethod.API,source:e,index:t.index,success:o,failure:a})}),c=e=>(r.dispatch("REMOVE_ITEM",{query:e}),null===r.query("GET_ITEM",e)),p=e=>new Promise((t,o)=>{r.dispatch("PROCESS_ITEM",{query:e,success:t,failure:o})}),d=babelHelpers.extends({},on(),a,createOptionAPI(r,t),{setOptions:e=>r.dispatch("SET_OPTIONS",{options:e}),addFile:l,addFiles:(...e)=>new Promise((t,r)=>{const o=[],a={};if(isArray(e[0]))o.push(...e[0]),Object.assign(a,e[1]||{});else{const t=e[e.length-1];"object"!=typeof t||t instanceof Blob||Object.assign(a,e.pop()),o.push(...e)}const i=[],n=forEachDelayed(o,e=>{i.push(l(e,a))});Promise.all(n).then(()=>{Promise.all(i).then(e=>{t(e)})})}),getFile:e=>r.query("GET_ITEM",e),processFile:p,removeFile:c,getFiles:()=>r.query("GET_ITEMS"),processFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e;return Promise.all(t.map(p))},removeFiles:(...e)=>{return(Array.isArray(e[0])?e[0]:e).map(e=>c(e))},browse:()=>{var e=o.element.querySelector("input[type=file]");e&&e.click()},destroy:()=>{d.fire("destroy",o.element),r.dispatch("ABORT_ALL"),o._destroy(),r.dispatch("DID_DESTROY")},insertBefore:e=>insertBefore(o.element,e),insertAfter:e=>insertAfter(o.element,e),appendTo:e=>e.appendChild(o.element),replaceElement:t=>{insertBefore(o.element,t),t.parentNode.removeChild(t),e=t},restoreElement:()=>{e&&(insertAfter(e,o.element),o.element.parentNode.removeChild(o.element),e=null)},isAttachedTo:t=>o.element===t||e===t,element:{get:()=>o.element}});return r.dispatch("DID_INIT"),createObject(d)},createAppObject=(e={})=>{const t=createApp$1(),r={};return forin(getOptions(),(e,t)=>{r[e]=t[0]}),t.setOptions(babelHelpers.extends({},r,e)),t},toCamels=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),e=>e.charAt(1).toUpperCase()),lowerCaseFirstLetter=e=>e.charAt(0).toLowerCase()+e.slice(1),attributeNameToPropertyName=e=>toCamels(e.replace(/^data-/,"")),mapObject=(e,t)=>{forin(t,(t,r)=>{forin(e,(o,a)=>{const i=new RegExp(t);if(!i.test(o))return;if(delete e[o],!1===r)return;if(isString(r))return void(e[r]=a);const n=r.group;isObject(r)&&!e[n]&&(e[n]={}),e[n][lowerCaseFirstLetter(o.replace(i,""))]=a}),r.mapping&&mapObject(e[r.group],r.mapping)})},getAttributesAsObject=(e,t={})=>{const r=[...e.attributes].reduce((t,r)=>(t[attributeNameToPropertyName(r.name)]=attr(e,r.name),t),{});return mapObject(r,t),r},createAppAtElement=(e,t={})=>{const r={multiple:"allowMultiple",capture:"captureMethod","^api":{group:"api",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"}}},id:!1,type:!1};applyFilters("SET_ATTRIBUTE_TO_OPTION_MAP",r);const o=babelHelpers.extends({},getAttributesAsObject(e,r),t),a=createAppObject(o);return a.replaceElement(e),a},createApp=(...e)=>isNode(e[0])?createAppAtElement(...e):createAppObject(...e),PRIVATE_METHODS$1=["fire","_read","_write"],createAppAPI=e=>{const t={};return copyObjectPropertiesToObject(e,t,PRIVATE_METHODS$1),t},replaceInString=(e,t)=>e.replace(/(?:{([a-z]+)})/g,(e,r)=>t[r]),images=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],text$1=["css","csv","html","txt"],map={zip:"zip|compressed",epub:"application/epub+zip"},guesstimateMimeType=(e="")=>(e=e.toLowerCase(),images.includes(e)?"image/"+("jpg"===e?"jpeg":"svg"===e?"svg+xml":e):text$1.includes(e)?"text/"+e:map[e]||null),createWorker=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(t),o=new Worker(r);return URL.revokeObjectURL(r),{post:(e,t)=>{const r=getUniqueId();o.onmessage=(e=>{e.data.id===r&&t(e.data.message)}),o.postMessage({id:r,message:e})}}},loadImage=(e,t)=>new Promise((t,r)=>{const o=new Image;o.onload=(()=>{t(o)}),o.onerror=(e=>{r(e)}),o.src=e}),copyFile=e=>renameFile(e,e.name),createAppPlugin=e=>e({addFilter:addFilter,utils:{Type:Type,isString:isString,toNaturalFileSize:toNaturalFileSize,replaceInString:replaceInString,getExtensionFromFilename:getExtensionFromFilename,guesstimateMimeType:guesstimateMimeType,getFilenameFromURL:getFilenameFromURL,createRoute:createRoute,createWorker:createWorker,createView:createView,loadImage:loadImage,copyFile:copyFile,renameFile:renameFile},views:{panel:panel}}),state={apps:[]},name="filepond",painter=createPainter(createUpdater(state.apps,"_read","_write"),60);if(document){const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:supported,create:create,destroy:destroy,parse:parse,find:find,registerPlugin:registerPlugin,setOptions:setOptions$$1}})),document.removeEventListener("DOMContentLoaded",e)};"loading"!==document.readyState?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e)}const FileStatus=babelHelpers.extends({},ItemStatus),create=(...e)=>{const t=createApp(...e);return t.on("destroy",destroy),state.apps.push(t),createAppAPI(t)},destroy=e=>{const t=state.apps.findIndex(t=>t.isAttachedTo(e));if(e=>0){return state.apps.splice(t,1)[0].restoreElement(),!0}return!1},parse=e=>{const t=[...e.querySelectorAll(`.${name}`)].filter(e=>!state.apps.find(t=>t.isAttachedTo(e))).map(e=>create(e));return state.apps.push(...t),t.map(e=>createAppAPI(e))},find=e=>{const t=state.apps.find(t=>t.isAttachedTo(e));return t?createAppAPI(t):null},isOperaMini=()=>"[object OperaMini]"===Object.prototype.toString.call(window.operamini),hasPromises=()=>"Promise"in window,hasBlobSlice=()=>"slice"in Blob.prototype,hasCreateObjectURL=()=>"URL"in window&&"createObjectURL"in window.URL,hasVisibility=()=>"visibilityState"in document,supported=()=>!(isOperaMini()||!hasVisibility()||!hasPromises()||!hasBlobSlice()||!hasCreateObjectURL()),registerPlugin=(...e)=>e.forEach(createAppPlugin),setOptions$$1=e=>(isObject(e)&&(state.apps.forEach(t=>{t.setOptions(e)}),setOptions$1(e)),getOptions());export{FileStatus,create,destroy,parse,find,supported,registerPlugin,setOptions$$1 as setOptions};